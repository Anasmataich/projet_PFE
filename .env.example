# ═══════════════════════════════════════════════════════
# GED — Plateforme Documentaire Intelligente & Sécurisée
# DSI — Ministère de l'Éducation Nationale du Maroc
# ═══════════════════════════════════════════════════════
#
# Copiez ce fichier vers .env et adaptez les valeurs.
#   cp .env.example .env
#
# IMPORTANT : Ne committez jamais le fichier .env

# ─────────────────────────────────────────────
# Environnement global
# ─────────────────────────────────────────────
NODE_ENV=development
COMPOSE_PROJECT_NAME=ged-platforme

# ─────────────────────────────────────────────
# Backend (Express / Node.js)
# ─────────────────────────────────────────────
PORT=5000
API_PREFIX=/api/v1

# ─────────────────────────────────────────────
# PostgreSQL
# ─────────────────────────────────────────────
DB_HOST=postgres
DB_PORT=5432
DB_NAME=ged_db
DB_USER=ged_user
DB_PASSWORD=ged_local_pg_2024
DB_SSL=false
DB_POOL_MIN=2
DB_POOL_MAX=10

POSTGRES_DB=ged_db
POSTGRES_USER=ged_user
POSTGRES_PASSWORD=ged_local_pg_2024

# ─────────────────────────────────────────────
# Redis
# ─────────────────────────────────────────────
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=ged_local_redis_2024
REDIS_TTL=3600

# ─────────────────────────────────────────────
# JWT (Access & Refresh Tokens) — DEV ONLY, replace in production
# ─────────────────────────────────────────────
JWT_ACCESS_SECRET=a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456
JWT_REFRESH_SECRET=f6e5d4c3b2a109876543210fedcba0987654321fedcba0987654321fedcba09
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ─────────────────────────────────────────────
# MFA (TOTP)
# ─────────────────────────────────────────────
MFA_APP_NAME=GED-Ministere
MFA_ISSUER=DSI-MinistereEducation

# ─────────────────────────────────────────────
# Chiffrement AES-256-GCM — DEV ONLY, replace in production
# ─────────────────────────────────────────────
ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef
ENCRYPTION_IV_LENGTH=16

# ─────────────────────────────────────────────
# Stockage S3 / MinIO (password must be >= 8 characters)
# ─────────────────────────────────────────────
STORAGE_ENDPOINT=http://minio:9000
STORAGE_ACCESS_KEY=minioadmin
STORAGE_SECRET_KEY=minioadmin123
STORAGE_BUCKET=ged-documents
STORAGE_REGION=us-east-1
STORAGE_USE_SSL=false

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123

# ─────────────────────────────────────────────
# Email (SMTP)
# ─────────────────────────────────────────────
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=GED <noreply@education.gov.ma>

# ─────────────────────────────────────────────
# CORS
# ─────────────────────────────────────────────
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
CORS_CREDENTIALS=true

# ─────────────────────────────────────────────
# Rate Limiting
# ─────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100

# ─────────────────────────────────────────────
# AI Service (FastAPI) — Backend → AI communication
# ─────────────────────────────────────────────
AI_SERVICE_URL=http://ai-service:8000
# Empty = dev (AI accepts all). Set same as API_KEY below for production.
AI_SERVICE_API_KEY=

# AI Service internal config (used by ai-service container)
ENV=development
DEBUG=false
API_KEY=
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin123
S3_BUCKET=ged-documents
S3_REGION=us-east-1
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# AI Model configuration (optional — defaults shown)
# Override to use custom/local models instead of HuggingFace Hub
MODEL_CACHE_DIR=./model_cache
CLASSIFIER_MODEL=cmarkea/distilcamembert-base-nli
SUMMARIZER_MODEL=moussaKam/barthez-orangesum-abstract
EMBEDDINGS_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
NER_SPACY_MODEL=fr_core_news_md
OCR_LANGUAGE=fra
MAX_FILE_SIZE_MB=50
MAX_TEXT_LENGTH=100000
SUMMARY_MAX_LENGTH=300
SUMMARY_MIN_LENGTH=50

# ─────────────────────────────────────────────
# Logging
# ─────────────────────────────────────────────
LOG_LEVEL=info
LOG_FILE=logs/app.log

# ─────────────────────────────────────────────
# Frontend (Vite)
# ─────────────────────────────────────────────
VITE_API_URL=http://localhost:5000/api/v1
VITE_APP_TITLE=GED — Ministère de l'Éducation Nationale
